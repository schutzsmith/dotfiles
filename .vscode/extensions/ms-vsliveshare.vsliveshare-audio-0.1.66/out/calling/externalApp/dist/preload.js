!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=36)}([function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.callStarted=0]="callStarted",e[e.muteChanged=1]="muteChanged",e[e.participantChanged=2]="participantChanged",e[e.participantsChanged=3]="participantsChanged"}(t.CallChangedType||(t.CallChangedType={})),function(e){e.getCallInfo="getCallInfo",e.getCurrentParticipants="getCurrentParticipants",e.getDominantSpeakers="getDominantSpeakers",e.endCall="endCall",e.enumerateDevices="enumerateDevices",e.initializeStackEvent="initializeStackEvent",e.isMuted="isMuted",e.loadSlimCore="loadSlimCore",e.muteOrUnmute="muteOrUnmute",e.selectDevices="selectDevices",e.getSelectedDevices="getSelectedDevices",e.startOrJoinCall="startOrJoinCall"}(n=t.RequestType||(t.RequestType={})),function(e){e.callChanged="callChanged",e.electronAppReady="electronAppReady",e.trace="trace"}(i=t.NotificationType||(t.NotificationType={})),function(e){e[e.error=0]="error",e[e.info=1]="info",e[e.warning=2]="warning"}(t.TraceType||(t.TraceType={}));t.AppEvents=class{constructor(e){this.jsonRPCProxy=e}get isDisposed(){return this.jsonRPCProxy.isDisposed}on(e,t){this.jsonRPCProxy.on(e,t)}sendRequest(e){return this.jsonRPCProxy.sendRequest(e)}sendNotification(e){return this.jsonRPCProxy.sendNotification(e)}dispose(){this.jsonRPCProxy.dispose()}};t.CallChanged=class{constructor(e,t,r){this.changeType=e,this.callParticipant=t,this.callInfo=r,this.eventType=i.callChanged}};t.GetCallInfo=class{constructor(){this.eventType=n.getCallInfo}};t.GetCurrentParticipants=class{constructor(){this.eventType=n.getCurrentParticipants}};t.GetDominantSpeakers=class{constructor(){this.eventType=n.getDominantSpeakers}};t.ElectronAppReady=class{constructor(){this.eventType=i.electronAppReady}};t.EndCall=class{constructor(){this.eventType=n.endCall}};t.EnumerateDevices=class{constructor(){this.eventType=n.enumerateDevices}};t.InitializeStackEvent=class{constructor(e,t){this.skypeToken=e,this.displayName=t,this.eventType=n.initializeStackEvent}};t.IsMuted=class{constructor(){this.eventType=n.isMuted}};t.LoadSlimCore=class{constructor(){this.eventType=n.loadSlimCore}};t.MuteOrUnmute=class{constructor(e,t){this.isMute=e,this.participant=t,this.eventType=n.muteOrUnmute}};t.SelectDevices=class{constructor(e){this.selectedDevices=e,this.eventType=n.selectDevices}};t.GetSelectedDevices=class{constructor(){this.eventType=n.getSelectedDevices}};t.StartOrJoinCall=class{constructor(e){this.groupContext=e,this.eventType=n.startOrJoinCall}};t.Trace=class{constructor(e,t){this.traceType=e,this.message=t,this.eventType=i.trace,"string"!=typeof t&&(this.message="")}}},function(e,t){e.exports=require("path")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0);class i{error(e){console.error(e);const t=this.getAppEvents();if(!t)return;const r=new n.Trace(n.TraceType.error,e);t.sendNotification(r)}info(e){console.log(e);const t=this.getAppEvents();if(!t)return;const r=new n.Trace(n.TraceType.info,e);t.sendNotification(r)}warn(e){console.warn(e);const t=this.getAppEvents();if(!t)return;const r=new n.Trace(n.TraceType.warning,e);t.sendNotification(r)}getAppEvents(){return window.appEvents}}t.ProxyTraceSource=i,t.proxyTraceSource=new i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.prototype.toString;function i(e){return"[object String]"===n.call(e)}function o(e){return Array.isArray(e)}t.boolean=function(e){return!0===e||!1===e},t.string=i,t.number=function(e){return"[object Number]"===n.call(e)},t.error=function(e){return"[object Error]"===n.call(e)},t.func=function(e){return"[object Function]"===n.call(e)},t.array=o,t.stringArray=function(e){return o(e)&&e.every(function(e){return i(e)})}},function(e,t){e.exports=require("os")},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e){return{dispose:e}}}(t.Disposable||(t.Disposable={})),function(e){var t={dispose:function(){}};e.None=function(){return t}}(t.Event||(t.Event={}));var n=function(){function e(){}return e.prototype.add=function(e,t,r){var n=this;void 0===t&&(t=null),this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:function(){return n.remove(e,t)}})},e.prototype.remove=function(e,t){if(void 0===t&&(t=null),this._callbacks){for(var r=!1,n=0,i=this._callbacks.length;n<i;n++)if(this._callbacks[n]===e){if(this._contexts[n]===t)return this._callbacks.splice(n,1),void this._contexts.splice(n,1);r=!0}if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}},e.prototype.invoke=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this._callbacks)return[];for(var r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0),o=0,s=n.length;o<s;o++)try{r.push(n[o].apply(i[o],e))}catch(e){console.error(e)}return r},e.prototype.isEmpty=function(){return!this._callbacks||0===this._callbacks.length},e.prototype.dispose=function(){this._callbacks=void 0,this._contexts=void 0},e}(),i=function(){function e(e){this._options=e}return Object.defineProperty(e.prototype,"event",{get:function(){var t=this;return this._event||(this._event=function(r,i,o){var s;return t._callbacks||(t._callbacks=new n),t._options&&t._options.onFirstListenerAdd&&t._callbacks.isEmpty()&&t._options.onFirstListenerAdd(t),t._callbacks.add(r,i),s={dispose:function(){t._callbacks.remove(r,i),s.dispose=e._noop,t._options&&t._options.onLastListenerRemove&&t._callbacks.isEmpty()&&t._options.onLastListenerRemove(t)}},Array.isArray(o)&&o.push(s),s}),this._event},enumerable:!0,configurable:!0}),e.prototype.fire=function(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)},e.prototype.dispose=function(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)},e._noop=function(){},e}();t.Emitter=i},,function(e,t){e.exports=require("crypto")},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),s=r(3),a=8192,c=new Buffer("\r","ascii")[0],u=new Buffer("\n","ascii")[0],f=function(){function e(e){void 0===e&&(e="utf8"),this.encoding=e,this.index=0,this.buffer=new Buffer(a)}return e.prototype.append=function(e){var t=e;if("string"==typeof e){var r=e,n=Buffer.byteLength(r,this.encoding);(t=new Buffer(n)).write(r,0,n,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var i=(Math.ceil((this.index+t.length)/a)+1)*a;0===this.index?(this.buffer=new Buffer(i),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],i)}this.index+=t.length},e.prototype.tryReadHeaders=function(){for(var e=void 0,t=0;t+3<this.index&&(this.buffer[t]!==c||this.buffer[t+1]!==u||this.buffer[t+2]!==c||this.buffer[t+3]!==u);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split("\r\n").forEach(function(t){var r=t.indexOf(":");if(-1===r)throw new Error("Message header must separate key and value using :");var n=t.substr(0,r),i=t.substr(r+1).trim();e[n]=i});var r=t+4;return this.buffer=this.buffer.slice(r),this.index=this.index-r,e},e.prototype.tryReadContent=function(e){if(this.index<e)return null;var t=this.buffer.toString(this.encoding,0,e),r=e;return this.buffer.copy(this.buffer,0,r),this.index=this.index-r,t},Object.defineProperty(e.prototype,"numberOfBytes",{get:function(){return this.index},enumerable:!0,configurable:!0}),e}();!function(e){e.is=function(e){var t=e;return t&&s.func(t.listen)&&s.func(t.dispose)&&s.func(t.onError)&&s.func(t.onClose)&&s.func(t.onPartialMessage)}}(t.MessageReader||(t.MessageReader={}));var l=function(){function e(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter,this.partialMessageEmitter=new o.Emitter}return e.prototype.dispose=function(){this.errorEmitter.dispose(),this.closeEmitter.dispose()},Object.defineProperty(e.prototype,"onError",{get:function(){return this.errorEmitter.event},enumerable:!0,configurable:!0}),e.prototype.fireError=function(e){this.errorEmitter.fire(this.asError(e))},Object.defineProperty(e.prototype,"onClose",{get:function(){return this.closeEmitter.event},enumerable:!0,configurable:!0}),e.prototype.fireClose=function(){this.closeEmitter.fire(void 0)},Object.defineProperty(e.prototype,"onPartialMessage",{get:function(){return this.partialMessageEmitter.event},enumerable:!0,configurable:!0}),e.prototype.firePartialMessage=function(e){this.partialMessageEmitter.fire(e)},e.prototype.asError=function(e){return e instanceof Error?e:new Error("Reader recevied error. Reason: "+(s.string(e.message)?e.message:"unknown"))},e}();t.AbstractMessageReader=l;var d=function(e){function t(t,r){void 0===r&&(r="utf8");var n=e.call(this)||this;return n.readable=t,n.buffer=new f(r),n._partialMessageTimeout=1e4,n}return i(t,e),Object.defineProperty(t.prototype,"partialMessageTimeout",{get:function(){return this._partialMessageTimeout},set:function(e){this._partialMessageTimeout=e},enumerable:!0,configurable:!0}),t.prototype.listen=function(e){var t=this;this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",function(e){t.onData(e)}),this.readable.on("error",function(e){return t.fireError(e)}),this.readable.on("close",function(){return t.fireClose()})},t.prototype.onData=function(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){var t=this.buffer.tryReadHeaders();if(!t)return;var r=t["Content-Length"];if(!r)throw new Error("Header must provide a Content-Length property.");var n=parseInt(r);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}var i=this.buffer.tryReadContent(this.nextMessageLength);if(null===i)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var o=JSON.parse(i);this.callback(o)}},t.prototype.clearPartialMessageTimer=function(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)},t.prototype.setPartialMessageTimer=function(){var e=this;this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout(function(t,r){e.partialMessageTimer=void 0,t===e.messageToken&&(e.firePartialMessage({messageToken:t,waitingTime:r}),e.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))},t}(l);t.StreamMessageReader=d;var h=function(e){function t(t){var r=e.call(this)||this;r.process=t;var n=r.process;return n.on("error",function(e){return r.fireError(e)}),n.on("close",function(){return r.fireClose()}),r}return i(t,e),t.prototype.listen=function(e){this.process.on("message",e)},t}(l);t.IPCMessageReader=h;var p=function(e){function t(t,r){return void 0===r&&(r="utf-8"),e.call(this,t,r)||this}return i(t,e),t}(d);t.SocketMessageReader=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),s=r(3);!function(e){e.is=function(e){var t=e;return t&&s.func(t.dispose)&&s.func(t.onClose)&&s.func(t.onError)&&s.func(t.write)}}(t.MessageWriter||(t.MessageWriter={}));var a=function(){function e(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter}return e.prototype.dispose=function(){this.errorEmitter.dispose(),this.closeEmitter.dispose()},Object.defineProperty(e.prototype,"onError",{get:function(){return this.errorEmitter.event},enumerable:!0,configurable:!0}),e.prototype.fireError=function(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])},Object.defineProperty(e.prototype,"onClose",{get:function(){return this.closeEmitter.event},enumerable:!0,configurable:!0}),e.prototype.fireClose=function(){this.closeEmitter.fire(void 0)},e.prototype.asError=function(e){return e instanceof Error?e:new Error("Writer recevied error. Reason: "+(s.string(e.message)?e.message:"unknown"))},e}();t.AbstractMessageWriter=a;var c=function(e){function t(t,r){void 0===r&&(r="utf8");var n=e.call(this)||this;return n.writable=t,n.encoding=r,n.errorCount=0,n.writable.on("error",function(e){return n.fireError(e)}),n.writable.on("close",function(){return n.fireClose()}),n}return i(t,e),t.prototype.write=function(e){var t=JSON.stringify(e),r=["Content-Length: ",Buffer.byteLength(t,this.encoding).toString(),"\r\n","\r\n"];try{this.writable.write(r.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}},t}(a);t.StreamMessageWriter=c;var u=function(e){function t(t){var r=e.call(this)||this;r.process=t,r.errorCount=0,r.queue=[],r.sending=!1;var n=r.process;return n.on("error",function(e){return r.fireError(e)}),n.on("close",function(){return r.fireClose}),r}return i(t,e),t.prototype.write=function(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)},t.prototype.doWriteMessage=function(e){var t=this;try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,function(r){t.sending=!1,r?(t.errorCount++,t.fireError(r,e,t.errorCount)):t.errorCount=0,t.queue.length>0&&t.doWriteMessage(t.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}},t}(a);t.IPCMessageWriter=u;var f=function(e){function t(t,r){void 0===r&&(r="utf8");var n=e.call(this)||this;return n.socket=t,n.queue=[],n.sending=!1,n.encoding=r,n.errorCount=0,n.socket.on("error",function(e){return n.fireError(e)}),n.socket.on("close",function(){return n.fireClose()}),n}return i(t,e),t.prototype.write=function(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)},t.prototype.doWriteMessage=function(e){var t=this,r=JSON.stringify(e),n=["Content-Length: ",Buffer.byteLength(r,this.encoding).toString(),"\r\n","\r\n"];try{this.sending=!0,this.socket.write(n.join(""),"ascii",function(n){n&&t.handleError(n,e);try{t.socket.write(r,t.encoding,function(r){t.sending=!1,r?t.handleError(r,e):t.errorCount=0,t.queue.length>0&&t.doWriteMessage(t.queue.shift())})}catch(n){t.handleError(n,e)}})}catch(t){this.handleError(t,e)}},t.prototype.handleError=function(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)},t}(a);t.SocketMessageWriter=f},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("electron")},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),i=r(0),o=r(37),s=r(2);console.log(`[Preload] pid: ${process.pid}`);const{remote:a}=r(12);if(!a.process.argv||a.process.argv.length<4)throw new Error("[Preload] required arguments not specified");const c=r(44),u=a.process.argv[2],f=c.load(u),l=n.join(u,"lib/video-renderer"),d=c.load(l);console.log(`[Preload] videoRenderer: ${d}`);const h=n.join(u,"lib/sharing-indicator"),p=c.load(h);console.log(`[Preload] controlInjector: ${p}`),window.SlimCore=f,window.Enums=f.Enums,window.VideoRenderer=d,window.ControlInjector=p;const v=a.process.argv[3];console.log(`[Preload] JsonRPC IPC PipeName: ${v}`);const g=new o.JsonRPC(v,s.proxyTraceSource),y=new i.AppEvents(g);window.appEvents=y,console.log("[Preload] Completed")},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(38),o=r(4),s=r(11),a=r(0);t.JsonRPC=class{constructor(e,t,r=!1){this.connectionRegistrationQueue=[],this.trace=t,r?this.setupServer(e):this.setupClient(e)}get isDisposed(){return this.disposed}sendNotification(e){return n(this,void 0,void 0,function*(){if(this.connection)try{const t=new i.NotificationType(e.eventType);return yield this.connection.sendNotification(t,e)}catch(e){if(!this.disposed)throw this.trace.error(`[JsonRPC] sendNotification failed: ${e}`),e}})}sendRequest(e){return n(this,void 0,void 0,function*(){if(this.connection)try{const t=new i.RequestType(e.eventType);return yield this.connection.sendRequest(t,e)}catch(e){if(!this.disposed)throw this.trace.error(`[JsonRPC] sendRequest failed: ${e}`),e}})}on(e,t){this.connection?this.registerEvent(e,t):this.connectionRegistrationQueue.push({eventType:e,func:t})}dispose(){this.disposed||(this.connection&&(this.connection.dispose(),this.connection=null),this.socket&&(this.socket.destroy(),this.socket=null),this.disposed=!0,this.connectionRegistrationQueue=[])}isNotificationType(e){return a.NotificationType[e]}setupClient(e){const t=this.getPipePath(e);this.socket=s.createConnection(t),this.socket.on("connect",()=>{this.trace.info("[JsonRPC] socket connected")}),this.socket.on("error",e=>{this.trace.info(`[JsonRPC] stream connection failure with error: ${e.message}`)}),this.connection=i.createMessageConnection(new i.StreamMessageReader(this.socket),new i.StreamMessageWriter(this.socket)),this.initialize()}initialize(){for(const e of this.connectionRegistrationQueue)this.registerEvent(e.eventType,e.func);this.connectionRegistrationQueue=[],this.connection.onError(e=>this.trace.info(`[JsonRPC] RPC connection failure with error: ${e}`)),this.connection.onUnhandledNotification(e=>this.trace.info(`[JsonRPC] RPC unhandled notification: ${e}`)),this.connection.onDispose(()=>this.trace.info("[JsonRPC] RPC connection disposed")),this.connection.onClose(()=>{this.trace.info("[JsonRPC] RPC connection closed"),this.disposed||this.dispose()}),this.connection.listen()}registerEvent(e,t){if(this.isNotificationType(e)){this.trace.info(`[JsonRPC] Register NotificationType: ${e}`);const r=new i.NotificationType(e);this.connection.onNotification(r,t)}else{this.trace.info(`[JsonRPC] Register EventType:${e}`);const r=new i.RequestType(e);this.connection.onRequest(r,t)}}setupServer(e){const t=s.createServer(function(e){this.connection=i.createMessageConnection(new i.StreamMessageReader(e),new i.StreamMessageWriter(e)),this.initialize(),e.on("connect",()=>{this.trace.info("[JsonRPC] stream connected")}),e.on("end",()=>{this.trace.info("[JsonRPC] stream ended"),t.close()}),e.on("error",e=>{this.trace.error(`[JsonRPC] stream error: ${e}`)}),e.on("data",e=>{this.trace.info(`[JsonRPC] stream data: ${e}`)}),e.on("event",e=>{this.trace.info(`[JsonRPC] stream event: ${e}`)})}.bind(this)),r=this.getPipePath(e);t.listen(r)}getPipePath(e){return"win32"===process.platform?`\\\\.\\pipe\\${e}`:`${o.tmpdir()}/LiveShareAudio_${e}`}}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function o(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),a=r(39);t.RequestType=a.RequestType,t.RequestType0=a.RequestType0,t.RequestType1=a.RequestType1,t.RequestType2=a.RequestType2,t.RequestType3=a.RequestType3,t.RequestType4=a.RequestType4,t.RequestType5=a.RequestType5,t.RequestType6=a.RequestType6,t.RequestType7=a.RequestType7,t.RequestType8=a.RequestType8,t.RequestType9=a.RequestType9,t.ResponseError=a.ResponseError,t.ErrorCodes=a.ErrorCodes,t.NotificationType=a.NotificationType,t.NotificationType0=a.NotificationType0,t.NotificationType1=a.NotificationType1,t.NotificationType2=a.NotificationType2,t.NotificationType3=a.NotificationType3,t.NotificationType4=a.NotificationType4,t.NotificationType5=a.NotificationType5,t.NotificationType6=a.NotificationType6,t.NotificationType7=a.NotificationType7,t.NotificationType8=a.NotificationType8,t.NotificationType9=a.NotificationType9;var c=r(9);t.MessageReader=c.MessageReader,t.StreamMessageReader=c.StreamMessageReader,t.IPCMessageReader=c.IPCMessageReader,t.SocketMessageReader=c.SocketMessageReader;var u=r(10);t.MessageWriter=u.MessageWriter,t.StreamMessageWriter=u.StreamMessageWriter,t.IPCMessageWriter=u.IPCMessageWriter,t.SocketMessageWriter=u.SocketMessageWriter;var f=r(6);t.Disposable=f.Disposable,t.Event=f.Event,t.Emitter=f.Emitter;var l=r(40);t.CancellationTokenSource=l.CancellationTokenSource,t.CancellationToken=l.CancellationToken;var d,h,p,v,g,y=r(41);o(r(42)),o(r(43)),function(e){e.type=new a.NotificationType("$/cancelRequest")}(d||(d={})),t.NullLogger=Object.freeze({error:function(){},warn:function(){},info:function(){},log:function(){}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(h=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(h=t.Trace||(t.Trace={})),function(e){e.type=new a.NotificationType("$/setTraceNotification")}(p=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new a.NotificationType("$/logTraceNotification")}(v=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(g=t.ConnectionErrors||(t.ConnectionErrors={}));var m,_=function(e){function t(r,n){var i=e.call(this,n)||this;return i.code=r,Object.setPrototypeOf(i,t.prototype),i}return i(t,e),t}(Error);function b(e,t,r,n){var i,o,c=0,u=0,b=0,w="2.0",T=void 0,C=Object.create(null),R=void 0,E=Object.create(null),P=new y.LinkedMap,M=Object.create(null),k=Object.create(null),O=h.Off,N=m.New,S=new f.Emitter,q=new f.Emitter,j=new f.Emitter,x=new f.Emitter;function L(e){return"req-"+e.toString()}function D(e,t){var r;a.isRequestMessage(t)?e.set(L(t.id),t):a.isResponseMessage(t)?e.set(null===(r=t.id)?"res-unknown-"+(++b).toString():"res-"+r.toString(),t):e.set("not-"+(++u).toString(),t)}function I(e){}function J(){return N===m.Listening}function W(){return N===m.Closed}function A(){return N===m.Disposed}function z(){N!==m.New&&N!==m.Listening||(N=m.Closed,q.fire(void 0))}function $(){i||0===P.size||(i=setImmediate(function(){i=void 0,function(){if(0===P.size)return;var e=P.shift();try{a.isRequestMessage(e)?function(e){if(A())return;function r(r,n,i){var o={jsonrpc:w,id:e.id};r instanceof a.ResponseError?o.error=r.toJson():o.result=void 0===r?null:r,V(o,n,i),t.write(o)}function n(r,n,i){var o={jsonrpc:w,id:e.id,error:r.toJson()};V(o,n,i),t.write(o)}!function(e){if(O===h.Off||!o)return;var t=void 0;O===h.Verbose&&e.params&&(t="Params: "+JSON.stringify(e.params,null,4)+"\n\n");o.log("Received request '"+e.method+" - ("+e.id+")'.",t)}(e);var i,c,u=C[e.method];u&&(i=u.type,c=u.handler);var f=Date.now();if(c||T){var d=new l.CancellationTokenSource,p=String(e.id);k[p]=d;try{var v=void 0,g=v=void 0===e.params||void 0!==i&&0===i.numberOfParams?c?c(d.token):T(e.method,d.token):s.array(e.params)&&(void 0===i||i.numberOfParams>1)?c?c.apply(void 0,e.params.concat([d.token])):T.apply(void 0,[e.method].concat(e.params,[d.token])):c?c(e.params,d.token):T(e.method,e.params,d.token);v?g.then?g.then(function(t){delete k[p],r(t,e.method,f)},function(t){delete k[p],t instanceof a.ResponseError?n(t,e.method,f):t&&s.string(t.message)?n(new a.ResponseError(a.ErrorCodes.InternalError,"Request "+e.method+" failed with message: "+t.message),e.method,f):n(new a.ResponseError(a.ErrorCodes.InternalError,"Request "+e.method+" failed unexpectedly without providing any details."),e.method,f)}):(delete k[p],r(v,e.method,f)):(delete k[p],function(r,n,i){void 0===r&&(r=null);var o={jsonrpc:w,id:e.id,result:r};V(o,n,i),t.write(o)}(v,e.method,f))}catch(t){delete k[p],t instanceof a.ResponseError?r(t,e.method,f):t&&s.string(t.message)?n(new a.ResponseError(a.ErrorCodes.InternalError,"Request "+e.method+" failed with message: "+t.message),e.method,f):n(new a.ResponseError(a.ErrorCodes.InternalError,"Request "+e.method+" failed unexpectedly without providing any details."),e.method,f)}}else n(new a.ResponseError(a.ErrorCodes.MethodNotFound,"Unhandled method "+e.method),e.method,f)}(e):a.isNotificationMessage(e)?function(e){if(A())return;var t,n=void 0;if(e.method===d.type.method)t=function(e){var t=e.id,r=k[String(t)];r&&r.cancel()};else{var i=E[e.method];i&&(t=i.handler,n=i.type)}if(t||R)try{!function(e){if(O===h.Off||!o||e.method===v.type.method)return;var t=void 0;O===h.Verbose&&(t=e.params?"Params: "+JSON.stringify(e.params,null,4)+"\n\n":"No parameters provided.\n\n");o.log("Received notification '"+e.method+"'.",t)}(e),void 0===e.params||void 0!==n&&0===n.numberOfParams?t?t():R(e.method):s.array(e.params)&&(void 0===n||n.numberOfParams>1)?t?t.apply(void 0,e.params):R.apply(void 0,[e.method].concat(e.params)):t?t(e.params):R(e.method,e.params)}catch(t){t.message?r.error("Notification handler '"+e.method+"' failed with message: "+t.message):r.error("Notification handler '"+e.method+"' failed unexpectedly.")}else j.fire(e)}(e):a.isResponseMessage(e)?function(e){if(A())return;if(null===e.id)e.error?r.error("Received response message without id: Error is: \n"+JSON.stringify(e.error,void 0,4)):r.error("Received response message without id. No further error information provided.");else{var t=String(e.id),n=M[t];if(function(e,t){if(O===h.Off||!o)return;var r=void 0;O===h.Verbose&&(e.error&&e.error.data?r="Error data: "+JSON.stringify(e.error.data,null,4)+"\n\n":e.result?r="Result: "+JSON.stringify(e.result,null,4)+"\n\n":void 0===e.error&&(r="No result returned.\n\n"));if(t){var n=e.error?" Request failed: "+e.error.message+" ("+e.error.code+").":"";o.log("Received response '"+t.method+" - ("+e.id+")' in "+(Date.now()-t.timerStart)+"ms."+n,r)}else o.log("Received response "+e.id+" without active response promise.",r)}(e,n),n){delete M[t];try{if(e.error){var i=e.error;n.reject(new a.ResponseError(i.code,i.message,i.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(i){i.message?r.error("Response handler '"+n.method+"' failed with message: "+i.message):r.error("Response handler '"+n.method+"' failed unexpectedly.")}}}}(e):function(e){if(!e)return void r.error("Received empty message.");r.error("Received message which is neither a response nor a notification message:\n"+JSON.stringify(e,null,4));var t=e;if(s.string(t.id)||s.number(t.id)){var n=String(t.id),i=M[n];i&&i.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{$()}}()}))}e.onClose(z),e.onError(function(e){S.fire([e,void 0,void 0])}),t.onClose(z),t.onError(function(e){S.fire(e)});var U=function(e){try{if(a.isNotificationMessage(e)&&e.method===d.type.method){var r=L(e.params.id),i=P.get(r);if(a.isRequestMessage(i)){var o=n&&n.cancelUndispatched?n.cancelUndispatched(i,I):void 0;if(o&&(void 0!==o.error||void 0!==o.result))return P.delete(r),o.id=i.id,V(o,e.method,Date.now()),void t.write(o)}}D(P,e)}finally{$()}};function V(e,t,r){if(O!==h.Off&&o){var n=void 0;O===h.Verbose&&(e.error&&e.error.data?n="Error data: "+JSON.stringify(e.error.data,null,4)+"\n\n":e.result?n="Result: "+JSON.stringify(e.result,null,4)+"\n\n":void 0===e.error&&(n="No result returned.\n\n")),o.log("Sending response '"+t+" - ("+e.id+")'. Processing request took "+(Date.now()-r)+"ms",n)}}function B(){if(W())throw new _(g.Closed,"Connection is closed.");if(A())throw new _(g.Disposed,"Connection is disposed.")}function F(e){return void 0===e?null:e}function Q(e,t){var r,n=e.numberOfParams;switch(n){case 0:r=null;break;case 1:r=F(t[0]);break;default:r=[];for(var i=0;i<t.length&&i<n;i++)r.push(F(t[i]));if(t.length<n)for(i=t.length;i<n;i++)r.push(null)}return r}var G={sendNotification:function(e){for(var r,n,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];if(B(),s.string(e))switch(r=e,i.length){case 0:n=null;break;case 1:n=i[0];break;default:n=i}else r=e.method,n=Q(e,i);var c={jsonrpc:w,method:r,params:n};!function(e){if(O!==h.Off&&o){var t=void 0;O===h.Verbose&&(t=e.params?"Params: "+JSON.stringify(e.params,null,4)+"\n\n":"No parameters provided.\n\n"),o.log("Sending notification '"+e.method+"'.",t)}}(c),t.write(c)},onNotification:function(e,t){B(),s.func(e)?R=e:t&&(s.string(e)?E[e]={type:void 0,handler:t}:E[e.method]={type:e,handler:t})},sendRequest:function(e){for(var r,n,i=[],u=1;u<arguments.length;u++)i[u-1]=arguments[u];B(),function(){if(!J())throw new Error("Call listen() first.")}();var f=void 0;if(s.string(e))switch(r=e,i.length){case 0:n=null;break;case 1:l.CancellationToken.is(i[0])?(n=null,f=i[0]):n=F(i[0]);break;default:var p=i.length-1;l.CancellationToken.is(i[p])?(f=i[p],n=2===i.length?F(i[0]):i.slice(0,p).map(function(e){return F(e)})):n=i.map(function(e){return F(e)})}else{r=e.method,n=Q(e,i);var v=e.numberOfParams;f=l.CancellationToken.is(i[v])?i[v]:void 0}var g=c++,y=new Promise(function(e,i){var s={jsonrpc:w,id:g,method:r,params:n},c={method:r,timerStart:Date.now(),resolve:e,reject:i};!function(e){if(O!==h.Off&&o){var t=void 0;O===h.Verbose&&e.params&&(t="Params: "+JSON.stringify(e.params,null,4)+"\n\n"),o.log("Sending request '"+e.method+" - ("+e.id+")'.",t)}}(s);try{t.write(s)}catch(e){c.reject(new a.ResponseError(a.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),c=null}c&&(M[String(g)]=c)});return f&&f.onCancellationRequested(function(){G.sendNotification(d.type,{id:g})}),y},onRequest:function(e,t){B(),s.func(e)?T=e:t&&(s.string(e)?C[e]={type:void 0,handler:t}:C[e.method]={type:e,handler:t})},trace:function(e,t,r){void 0===r&&(r=!1),o=(O=e)===h.Off?void 0:t,!r||W()||A()||G.sendNotification(p.type,{value:h.toString(e)})},onError:S.event,onClose:q.event,onUnhandledNotification:j.event,onDispose:x.event,dispose:function(){if(!A()){N=m.Disposed,x.fire(void 0);var r=new Error("Connection got disposed.");Object.keys(M).forEach(function(e){M[e].reject(r)}),M=Object.create(null),k=Object.create(null),P=new y.LinkedMap,s.func(t.dispose)&&t.dispose(),s.func(e.dispose)&&e.dispose()}},listen:function(){B(),function(){if(J())throw new _(g.AlreadyListening,"Connection is already listening")}(),N=m.Listening,e.listen(U)},inspect:function(){console.log("inspect")}};return G.onNotification(v.type,function(e){O!==h.Off&&o&&o.log(e.message,O===h.Verbose?e.verbose:void 0)}),G}t.ConnectionError=_,function(e){e.is=function(e){var t=e;return t&&s.func(t.cancelUndispatched)}}(t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(m||(m={})),t.createMessageConnection=function(e,r,n,i){var o;return n||(n=t.NullLogger),b(void 0!==(o=e).listen&&void 0===o.read?e:new c.StreamMessageReader(e),function(e){return void 0!==e.write&&void 0===e.end}(r)?r:new u.StreamMessageWriter(r),n,i)}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,s=r(3);!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.MessageWriteError=1,e.MessageReadError=2}(o=t.ErrorCodes||(t.ErrorCodes={}));var a=function(e){function t(r,n,i){var a=e.call(this,n)||this;return a.code=s.number(r)?r:o.UnknownErrorCode,a.data=i,Object.setPrototypeOf(a,t.prototype),a}return i(t,e),t.prototype.toJson=function(){return{code:this.code,message:this.message,data:this.data}},t}(Error);t.ResponseError=a;var c=function(){function e(e,t){this._method=e,this._numberOfParams=t}return Object.defineProperty(e.prototype,"method",{get:function(){return this._method},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfParams",{get:function(){return this._numberOfParams},enumerable:!0,configurable:!0}),e}();t.AbstractMessageType=c;var u=function(e){function t(t){var r=e.call(this,t,0)||this;return r._=void 0,r}return i(t,e),t}(c);t.RequestType0=u;var f=function(e){function t(t){var r=e.call(this,t,1)||this;return r._=void 0,r}return i(t,e),t}(c);t.RequestType=f;var l=function(e){function t(t){var r=e.call(this,t,1)||this;return r._=void 0,r}return i(t,e),t}(c);t.RequestType1=l;var d=function(e){function t(t){var r=e.call(this,t,2)||this;return r._=void 0,r}return i(t,e),t}(c);t.RequestType2=d;var h=function(e){function t(t){var r=e.call(this,t,3)||this;return r._=void 0,r}return i(t,e),t}(c);t.RequestType3=h;var p=function(e){function t(t){var r=e.call(this,t,4)||this;return r._=void 0,r}return i(t,e),t}(c);t.RequestType4=p;var v=function(e){function t(t){var r=e.call(this,t,5)||this;return r._=void 0,r}return i(t,e),t}(c);t.RequestType5=v;var g=function(e){function t(t){var r=e.call(this,t,6)||this;return r._=void 0,r}return i(t,e),t}(c);t.RequestType6=g;var y=function(e){function t(t){var r=e.call(this,t,7)||this;return r._=void 0,r}return i(t,e),t}(c);t.RequestType7=y;var m=function(e){function t(t){var r=e.call(this,t,8)||this;return r._=void 0,r}return i(t,e),t}(c);t.RequestType8=m;var _=function(e){function t(t){var r=e.call(this,t,9)||this;return r._=void 0,r}return i(t,e),t}(c);t.RequestType9=_;var b=function(e){function t(t){var r=e.call(this,t,1)||this;return r._=void 0,r}return i(t,e),t}(c);t.NotificationType=b;var w=function(e){function t(t){var r=e.call(this,t,0)||this;return r._=void 0,r}return i(t,e),t}(c);t.NotificationType0=w;var T=function(e){function t(t){var r=e.call(this,t,1)||this;return r._=void 0,r}return i(t,e),t}(c);t.NotificationType1=T;var C=function(e){function t(t){var r=e.call(this,t,2)||this;return r._=void 0,r}return i(t,e),t}(c);t.NotificationType2=C;var R=function(e){function t(t){var r=e.call(this,t,3)||this;return r._=void 0,r}return i(t,e),t}(c);t.NotificationType3=R;var E=function(e){function t(t){var r=e.call(this,t,4)||this;return r._=void 0,r}return i(t,e),t}(c);t.NotificationType4=E;var P=function(e){function t(t){var r=e.call(this,t,5)||this;return r._=void 0,r}return i(t,e),t}(c);t.NotificationType5=P;var M=function(e){function t(t){var r=e.call(this,t,6)||this;return r._=void 0,r}return i(t,e),t}(c);t.NotificationType6=M;var k=function(e){function t(t){var r=e.call(this,t,7)||this;return r._=void 0,r}return i(t,e),t}(c);t.NotificationType7=k;var O=function(e){function t(t){var r=e.call(this,t,8)||this;return r._=void 0,r}return i(t,e),t}(c);t.NotificationType8=O;var N=function(e){function t(t){var r=e.call(this,t,9)||this;return r._=void 0,r}return i(t,e),t}(c);t.NotificationType9=N,t.isRequestMessage=function(e){var t=e;return t&&s.string(t.method)&&(s.string(t.id)||s.number(t.id))},t.isNotificationMessage=function(e){var t=e;return t&&s.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){var t=e;return t&&(void 0!==t.result||!!t.error)&&(s.string(t.id)||s.number(t.id)||null===t.id)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(6),o=r(3);!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i.Event.None}),e.is=function(t){var r=t;return r&&(r===e.None||r===e.Cancelled||o.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}}(n=t.CancellationToken||(t.CancellationToken={}));var s=Object.freeze(function(e,t){var r=setTimeout(e.bind(t),0);return{dispose:function(){clearTimeout(r)}}}),a=function(){function e(){this._isCancelled=!1}return e.prototype.cancel=function(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))},Object.defineProperty(e.prototype,"isCancellationRequested",{get:function(){return this._isCancelled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onCancellationRequested",{get:function(){return this._isCancelled?s:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)},enumerable:!0,configurable:!0}),e}(),c=function(){function e(){}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token||(this._token=new a),this._token},enumerable:!0,configurable:!0}),e.prototype.cancel=function(){this._token?this._token.cancel():this._token=n.Cancelled},e.prototype.dispose=function(){this.cancel()},e}();t.CancellationTokenSource=c},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(n=t.Touch||(t.Touch={}));var i=function(){function e(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}return e.prototype.clear=function(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0},e.prototype.isEmpty=function(){return!this._head&&!this._tail},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.get=function(e){var t=this._map.get(e);if(t)return t.value},e.prototype.set=function(e,t,r){void 0===r&&(r=n.None);var i=this._map.get(e);if(i)i.value=t,r!==n.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(i);break;case n.First:this.addItemFirst(i);break;case n.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}},e.prototype.delete=function(e){var t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)},e.prototype.shift=function(){if(this._head||this._tail){if(!this._head||!this._tail)throw new Error("Invalid list");var e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}},e.prototype.forEach=function(e,t){for(var r=this._head;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.next},e.prototype.forEachReverse=function(e,t){for(var r=this._tail;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.previous},e.prototype.values=function(){for(var e=[],t=this._head;t;)e.push(t.value),t=t.next;return e},e.prototype.keys=function(){for(var e=[],t=this._head;t;)e.push(t.key),t=t.next;return e},e.prototype.addItemFirst=function(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e},e.prototype.addItemLast=function(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e},e.prototype.removeItem=function(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{var t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}},e.prototype.touch=function(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===n.First||t===n.Last)if(t===n.First){if(e===this._head)return;var r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===n.Last){if(e===this._tail)return;r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}},e}();t.LinkedMap=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(4),o=r(8),s=r(11),a=r(9),c=r(10);t.generateRandomPipeName=function(){var e=o.randomBytes(21).toString("hex");return"win32"===process.platform?"\\\\.\\pipe\\vscode-jsonrpc-"+e+"-sock":n.join(i.tmpdir(),"vscode-"+e+".sock")},t.createClientPipeTransport=function(e,t){var r;void 0===t&&(t="utf-8");var n=new Promise(function(e,t){r=e});return new Promise(function(i,o){var u=s.createServer(function(e){u.close(),r([new a.SocketMessageReader(e,t),new c.SocketMessageWriter(e,t)])});u.on("error",o),u.listen(e,function(){u.removeListener("error",o),i({onConnected:function(){return n}})})})},t.createServerPipeTransport=function(e,t){void 0===t&&(t="utf-8");var r=s.createConnection(e);return[new a.SocketMessageReader(r,t),new c.SocketMessageWriter(r,t)]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),i=r(9),o=r(10);t.createClientSocketTransport=function(e,t){var r;void 0===t&&(t="utf-8");var s=new Promise(function(e,t){r=e});return new Promise(function(a,c){var u=n.createServer(function(e){u.close(),r([new i.SocketMessageReader(e,t),new o.SocketMessageWriter(e,t)])});u.on("error",c),u.listen(e,"127.0.0.1",function(){u.removeListener("error",c),a({onConnected:function(){return s}})})})},t.createServerSocketTransport=function(e,t){void 0===t&&(t="utf-8");var r=n.createConnection(e,"127.0.0.1");return[new i.SocketMessageReader(r,t),new o.SocketMessageWriter(r,t)]}},function(e,t){e.exports=require("dynamicloader")}]);
//# sourceMappingURL=preload.js.map